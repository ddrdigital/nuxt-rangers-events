(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{315:function(t,e,n){var r=n(10),o=n(109),c=n(67);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,n){c(e,t,n)}),{AS_ENTRIES:!0}),e}})},319:function(t,e,n){"use strict";n.r(e);n(4),n(66),n(24);var r=n(33),o=n(28),c=n(34),l=(n(138),n(14),n(2),n(1),n(60),n(86),n(87),n(173),n(19),n(15),n(315),n(239),n(11),n(172),n(136),n(21),n(68),n(49),n(139),n(53),n(240),n(137),{name:"RangerEvents",data:function(){var t="rangerEvents";return{accessToken:"QCpZfwnsgnQsyHHB3ID5isS43cZnthj6YoSPtemxFGtcH15I",linkDepth:5,pageSize:20,showPageBtns:!0,showFirstLastBtns:!1,showPaginationTop:!0,showPaginationBottom:!0,showSearch:!0,url:"https://cms-chesheast.cloud.contensis.com/api/delivery/projects/Website/contentTypes/".concat(t,"/entries/"),searchFields:["title","description"],numOfPaginationBtns:0,includePageCount:!0,items:[],loading:!0,currentPageIndex:0,totalCount:null,pageCount:null,pageBtns:[],contentType:t,searchTerm:"",title:"",description:"",searchAlert:!1,fromDate:"",toDate:"",filterField:"tags",categories:["Bring a packed lunch","Bring binoculars if you have them","Car parking charge","Children must be accompanied by an adult","Easy walking grade","Full accessibility - level or ramped access. Accessible toilets available","Healthy walk / Event","Historial walk / Event","Ideal for families and accompanied children","Moderate walking grade","Partial accessibility - level or ramped access","Partnership event","Places limited - please book in advance","Please leave your dog at home","Please wear suitable boots and clothing","Refreshment shop, opportunity for refreshments","Strenuous walking grade","There is a charge for this event","Wildlife walk / Event"],categoriesChecked:[],firstRender:!0,selectedItem:null,showSelectedItem:!1,dateOptions:{weekday:"long",year:"numeric",month:"long",day:"numeric"},rxDate:/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2})?(?:\.\d*)?Z?$/}},filters:{currencydecimal:function(t){return t.toFixed(2)}},methods:{prependUrl:function(t){return"".concat(location.protocol,"//").concat(location.host).concat(location.pathname,"?event=").concat(t)},clearAlert:function(){this.searchAlert=!1},searchFilter:function(){var t=this,e=this.fromDate.length>0&&new Date(this.fromDate),n=this.toDate.length>0&&new Date(this.toDate);this.searchedItems=this.filteredItems.filter((function(r){return t.searchFields.some((function(o){return(!t.searchTerm||r[o].toLowerCase().includes(t.searchTerm.toLowerCase()))&&(!e||r.dateStartEnd.to>e)&&(!n||r.dateStartEnd.to<n)}))})),this.searchedItems.length>0&&this.searchedItems.sort(this.sortObjDate()),this.calculatePages()},setFilter:function(t){var e=this.categoriesChecked.indexOf(t);e>-1?this.categoriesChecked.splice(e,1):this.categoriesChecked.push(t),this.filterByCategories(),this.searchFilter()},filterByCategories:function(){var t=this;this.filteredItems=[],0===this.categoriesChecked.length?this.filteredItems=this.copyItems.slice():this.filteredItems=this.copyItems.filter((function(e){return e[t.filterField].map((function(a){return a.name})).some((function(e){return t.categoriesChecked.includes(e)}))})),this.searchFilter()},createDates:function(t){var e=this;return t.map((function(t){return Object.fromEntries(Object.entries(t).map((function(t){var n=Object(c.a)(t,2),r=n[0],l=n[1];if(!r.toLowerCase().includes("date"))return[r,l];if("string"==typeof l&&l.match(e.rxDate))return[r,new Date(l)];if("object"===Object(o.a)(l))try{return[r,{from:new Date(l.from),to:new Date(l.to)}]}catch(t){return[r,l]}})))}))},formatDate:function(t){return t.toLocaleString("en-GB",this.dateOptions)},getTime:function(t){var time=t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0});return"0:00 pm"===time?"12 noon":(time.startsWith("0")&&(time="12".concat(time.slice(1))),time.replace(" ",""))},getBaseUrl:function(){return"".concat(this.url,"?accessToken=").concat(this.accessToken,"&linkDepth=").concat(this.linkDepth,"&pageSize=500")},goToPage:function(t){this.$refs.tableTop.scrollIntoView(),this.items=this.pages[t-1],this.currentPageIndex=t-1,this.lastSearch=this.searchTerm},sortObjDate:function(){return function(a,b){return a.dateStartEnd.from-b.dateStartEnd.from}},calculatePages:function(){this.totalCount=this.searchedItems.length,this.pageCount=Math.ceil(this.totalCount/this.pageSize),this.currentPageIndex=0,this.pageBtns=Array.from({length:this.pageCount},(function(t,i){return i+1})),this.createPages(),this.items=this.pages[0]},createPages:function(){var t=this;this.pages=Object(r.a)(Array(Math.ceil(this.searchedItems.length/this.pageSize))).map((function(e){return t.searchedItems.splice(0,t.pageSize)}))},callAxios:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log(t),axios.get(t).then((function(t){e.copyItems=e.createDates(t.data.items),e.copyItems.length>0&&e.copyItems.sort(e.sortObjDate()),e.filteredItems=e.copyItems.slice(),e.searchedItems=e.copyItems.slice(),vanillaToast.show("Results updated."),e.loading=!1,e.calculatePages(),null!==n&&e.setSelectedItem(e.copyItems.find((function(t){return t.sys.slug===n})))})).catch((function(t){console.log(t)})).finally((function(){return e.loading=!1}))},resetSearch:function(){this.searchTerm="",this.fromDate="",this.toDate="",this.searchedItems=this.filteredItems.slice(),this.calculatePages()},setSelectedItem:function(t){window.scrollTo(0,0),this.selectedItem=t,document.title=t.entryTitle,this.showSelectedItem=!0,new URLSearchParams(window.location.search).delete("event"),window.history.pushState("","",this.prependUrl(t.sys.slug))},unSetSelectedItem:function(){window.scrollTo(0,0),this.selectedItem=null,document.title=this.title,this.showSelectedItem=!1,window.history.pushState({},"",document.location.href.split("?")[0])},getShareableLink:function(t){new URLSearchParams(window.location.search).delete("event"),navigator.clipboard.writeText(this.prependUrl(t.sys.slug)),vanillaToast.show("Event URL copied to clipboard.")},back:function(){location.reload()}},mounted:function(){this.title=document.title;var t=new Proxy(new URLSearchParams(window.location.search),{get:function(t,e){return t.get(e)}});if(null!==t.event){var e=window.location.href.toLowerCase().includes("preview")?"".concat(this.getBaseUrl(),"&versionStatus=latest"):this.getBaseUrl();this.callAxios(e,t.event)}else this.callAxios(this.getBaseUrl());this.showSearch&&(document.getElementById("contentTypeSearchInput").addEventListener("keyup",(function(t){t.preventDefault(),13===t.keyCode&&document.getElementById("contentTypeSearchBtn").click()})),window.addEventListener("keydown",(function(t){if(("U+000A"==t.keyIdentifier||"Enter"==t.keyIdentifier||13==t.keyCode)&&"INPUT"==t.target.nodeName&&"text"==t.target.type)return t.preventDefault(),!1}),!0))}}),d=l,m=n(69),component=Object(m.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{attrs:{id:"contentTypesContainer"}},[e("div",{ref:"tableTop",staticClass:"row events-container"},[e("div",{staticClass:"col-lg-8"},[t.showPaginationTop&&!t.showSelectedItem?e("div",{staticClass:"my-1"},[e("nav",{attrs:{role:"navigation","aria-label":"Results data navigation"}},[e("ul",{staticClass:"pagination d-flex flex-wrap mb-2 ms-0"},[e("li",{staticClass:"page-item",class:{disabled:0===t.currentPageIndex||t.loading}},[e("button",{staticClass:"page-link",attrs:{type:"button"},on:{click:function(e){return t.goToPage(t.currentPageIndex)}}},[t._v("\n                      Previous\n                    ")])]),t._v(" "),t.showFirstLastBtns?e("li",{staticClass:"page-item"},[e("button",{staticClass:"page-link",attrs:{type:"button","aria-label":"Next"},on:{click:function(e){return t.goToPage(1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._v(" "),t._l(t.pageBtns,(function(n){return t.showPageBtns?e("li",{staticClass:"page-item",class:{disabled:t.currentPageIndex===n-1}},[e("button",{staticClass:"page-link",attrs:{type:"button"},on:{click:function(e){return t.goToPage(n)}}},[t._v("\n                      "+t._s(n)+"\n                    ")])]):t._e()})),t._v(" "),t.showFirstLastBtns?e("li",{staticClass:"page-item"},[e("button",{staticClass:"page-link",attrs:{type:"button","aria-label":"Next"},on:{click:function(e){return t.goToPage(t.pageCount)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])]):t._e(),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.currentPageIndex+1===t.pageCount||t.loading}},[e("button",{staticClass:"page-link",attrs:{type:"button"},on:{click:function(e){return t.goToPage(t.currentPageIndex+2)}}},[t._v("\n                      Next\n                    ")])])],2)]),t._v(" "),0==t.loading?e("div",{staticClass:"api-results-info"},[e("p",[t._v("Total results: "),e("strong",[t._v(t._s(t.totalCount))])]),t._v(" "),e("p",[t._v("\n                  Current page:\n                  "),e("strong",[t._v(t._s(t.currentPageIndex+1))])])]):t._e()]):t._e(),t._v(" "),t.loading?e("div",[e("div",{staticClass:"spinner-grow",attrs:{role:"status"}})]):t._e(),t._v(" "),t._l(t.items,(function(n){return t.showSelectedItem?t._e():e("div",{staticClass:"ranger-event-card card card-item flex-md-row align-items-center"},[e("div",{staticClass:"col-12 col-md-4 thumbnail-container d-flex justify-content-center px-2"},[null!=n.image?e("img",{staticClass:"img-thumbnail img-fluid mt-4 m-md-2",attrs:{src:"https://www.cheshireeast.gov.uk/item.image.asset.sys.uri?width=225&height=150&fit=crop,center",alt:n.title}}):t._e()]),t._v(" "),e("div",{staticClass:"card-body col-12 col-md-8 text-center text-md-start ps-md-4 ps-xl-2"},[e("button",{staticClass:"ranger-event-title-link-button mb-3",attrs:{role:"button"},on:{click:function(e){return t.setSelectedItem(n)}}},[t._v("\n                  "+t._s(n.entryTitle)+"\n                ")]),t._v(" "),t.formatDate(n.dateStartEnd.from)===t.formatDate(n.dateStartEnd.to)?[e("p",[t._v(t._s(t.formatDate(n.dateStartEnd.from))+".")]),t._v(" "),e("p",[e("strong",[t._v("Time:")]),t._v(" "+t._s(t.getTime(n.dateStartEnd.from))+" - "+t._s(t.getTime(n.dateStartEnd.to))+".\n                  ")])]:[e("p",[t._v("From "+t._s(t.getTime(n.dateStartEnd.from))+" on "+t._s(t.formatDate(n.dateStartEnd.from))+".")]),t._v(" "),e("p",[t._v("Until "+t._s(t.getTime(n.dateStartEnd.to))+" on "+t._s(t.formatDate(n.dateStartEnd.to))+".")])],t._v(" "),e("p",[t._v(t._s(n.excerpt))])],2)])}))],2),t._v(" "),t.showSelectedItem?e("div",{staticClass:"selectedItem"},[e("button",{staticClass:"cec-button cec-button--back",attrs:{role:"button"},on:{click:t.unSetSelectedItem}},[t._v("\n              Back to results\n            ")]),t._v(" "),e("h2",{staticClass:"selected-item-details--title text-center"},[t._v("\n              "+t._s(t.selectedItem.title))]),t._v(" "),t.formatDate(t.selectedItem.dateStartEnd.from)===t.formatDate(t.selectedItem.dateStartEnd.to)?[e("p",{staticClass:"text-center fs-5"},[t._v(t._s(t.formatDate(t.selectedItem.dateStartEnd.from))+".")])]:[e("p",{staticClass:"text-center fs-5"},[t._v("\n                "+t._s(t.formatDate(t.selectedItem.dateStartEnd.from))+" to\n                "+t._s(t.formatDate(t.selectedItem.dateStartEnd.to))+".\n              ")])],t._v(" "),e("div",{staticClass:"selected-item-details"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[null!=t.selectedItem.image?e("img",{staticClass:"rounded mx-auto d-block featured-img",attrs:{src:"https://www.cheshireeast.gov.uk/selectedItem.image.asset.sys.uri",alt:t.selectedItem.title}}):t._e(),t._v(" "),e("hr")]),t._v(" "),e("div",{staticClass:"col-lg-6 pb-lg-2"},[e("h3",[t._v("Description")]),t._v(" "),e("div",{staticClass:"selected-item-details--description",domProps:{innerHTML:t._s(t.selectedItem.description)}})]),t._v(" "),e("div",{staticClass:"col-lg-6 pb-2"},[e("h3",[t._v("Details")]),t._v(" "),t.formatDate(t.selectedItem.dateStartEnd.from)===t.formatDate(t.selectedItem.dateStartEnd.to)?[e("p",[e("strong",[t._v("Time:")]),t._v(" "+t._s(t.getTime(t.selectedItem.dateStartEnd.from))+" - "+t._s(t.getTime(t.selectedItem.dateStartEnd.to))+".\n                    ")])]:[e("p",[e("strong",[t._v("From: ")]),t._v(t._s(t.getTime(t.selectedItem.dateStartEnd.from))+", "+t._s(t.formatDate(t.selectedItem.dateStartEnd.from))+".")]),t._v(" "),e("p",[e("strong",[t._v("To: ")]),t._v(t._s(t.getTime(t.selectedItem.dateStartEnd.to))+", "+t._s(t.formatDate(t.selectedItem.dateStartEnd.to))+". ")])],t._v(" "),e("p",[e("strong",[t._v("Leader(s):")]),t._v(" "+t._s(t.selectedItem.leaders)+"\n                  ")]),t._v(" "),e("p",[e("strong",[t._v("More information:")]),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.selectedItem.eventInformation)}})]),t._v(" "),t._m(0),t._v(" "),e("ul",t._l(t.selectedItem.tags,(function(n){return e("li",[t._v(t._s(n.name))])})),0),t._v(" "),e("h3",[t._v("Meeting point")]),t._v(" "),e("p",{domProps:{innerHTML:t._s(t.selectedItem.meetingPoint)}}),t._v(" "),e("div",{staticClass:"selected-item-details__map"},[e("div",{ref:"mapDiv",attrs:{id:"map"}},[e("a",{staticClass:"cec-button cec-button-forward",attrs:{target:"_blank",href:"https://maps.google.com/maps?q=selectedItem.mapLocation.lat,selectedItem.mapLocation.lon",role:"button","aria-pressed":"true"}},[t._v("Get Directions\n                        "),e("small",[t._v("(opens new window)")])])])])],2),t._v(" "),e("div",{staticClass:"col-12"},[e("hr"),t._v(" "),e("button",{staticClass:"cec-button cec-button--back",attrs:{role:"button"},on:{click:t.unSetSelectedItem}},[t._v("\n                    Back to results\n                  ")])])])])],2):t._e(),t._v(" "),t.showSelectedItem?t._e():e("div",{staticClass:"col-lg-4 mt-3 mt-lg-0"},[e("div",{staticClass:"search-options-container border-secondary border border-1 rounded p-3"},[e("h2",{staticClass:"mt-0"},[t._v("Search for an event")]),t._v(" "),e("div",{staticClass:"date-range"},[e("h3",[t._v("Date range")]),t._v(" "),e("label",{attrs:{for:"start-date"}},[t._v("From")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fromDate,expression:"fromDate"}],attrs:{type:"date",id:"start-date",min:"2022-09-01",max:"2025-12-31"},domProps:{value:t.fromDate},on:{input:function(e){e.target.composing||(t.fromDate=e.target.value)}}}),t._v(" "),e("label",{attrs:{for:"end-date"}},[t._v("To")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.toDate,expression:"toDate"}],attrs:{type:"date",id:"end-date",min:"2022-09-01",max:"2025-12-31"},domProps:{value:t.toDate},on:{change:function(e){return t.searchFilter()},input:function(e){e.target.composing||(t.toDate=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"search-options mt-3"},[t.showSearch?e("div",{staticClass:"input-group content-type-search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control me-2 border-secondary border border-1",attrs:{autocomplete:"off",type:"text",placeholder:"Type here...","aria-label":"Search term",id:"contentTypeSearchInput"},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.searchFilter],focus:t.clearAlert}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"contentTypeSearchBtn"},on:{click:t.searchFilter}},[t._v("\n                      Search\n                    ")])]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary w-100 mt-3",attrs:{type:"button"},on:{click:t.resetSearch}},[t._v("\n                    Clear\n                  ")])]):t._e(),t._v(" "),t.showSearch?e("div",{staticClass:"search-error-messages"},[t.searchAlert?e("div",{staticClass:"alert alert-secondary mt-2",attrs:{role:"alert"}},[t._v("\n                    Please enter a search term.\n                  ")]):t._e()]):t._e()])]),t._v(" "),e("div",{staticClass:"category-options pt=5 mt-5"},[e("h3",{staticClass:"mb-3"},[t._v("Or filter events by category")]),t._v(" "),t._l(t.categories,(function(n){return e("div",{staticClass:"form-check"},[e("input",{ref:n,refInFor:!0,staticClass:"form-check-input",attrs:{type:"checkbox",id:n},on:{change:function(e){return t.setFilter(n)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:n}},[t._v(t._s(n))])])}))],2)])]),t._v(" "),t.showPaginationBottom&&!t.showSelectedItem?e("div",{staticClass:"mt-1 mb-1"},[e("nav",{attrs:{"aria-label":"Results data navigation"}},[e("ul",{staticClass:"pagination mb-0"},[e("li",{staticClass:"page-item",class:{disabled:0===t.currentPageIndex}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.goToPage(t.currentPageIndex)}}},[t._v("Previous")])]),t._v(" "),t.showFirstLastBtns?e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.goToPage(1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._v(" "),t._l(t.pageBtns,(function(n){return t.showPageBtns?e("li",{staticClass:"page-item",class:{disabled:t.currentPageIndex===n-1}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.goToPage(n)}}},[t._v(t._s(n))])]):t._e()})),t._v(" "),t.showFirstLastBtns?e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.goToPage(t.pageCount)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])]):t._e(),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.currentPageIndex+1==t.pageCount}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.goToPage(t.currentPageIndex+2)}}},[t._v("Next")])])],2)]),t._v(" "),0==t.loading?e("div",{staticClass:"api-results-info"},[e("p",[t._v("Total results: "),e("strong",[t._v(t._s(t.totalCount))])]),t._v(" "),e("p",[t._v("Current page: "),e("strong",[t._v(t._s(t.currentPageIndex+1))])])]):t._e()]):t._e()])])])])}),[function(){var t=this._self._c;return t("p",[t("strong",[this._v("Tags:")])])}],!1,null,null,null);e.default=component.exports}}]);